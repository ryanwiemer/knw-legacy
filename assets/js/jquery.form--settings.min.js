//Validate

$(function() {
    $('.form').validate({
        rules: {
            name: {
                required: true,
                minlength: 2
            },
            email: {
                required: true,
                email: true
            },
            message: {
                required: true,

            },
            captcha: {
                required: true,
                answercheck: true
            }
        },
        messages: {
            name: {
                required: "A name is required",
                minlength: "Name not long enough"
            },
            email: {
                required: "A valid email is required"
            },
            message: {
                required: "Please add your message",
                minlength: "A longer message is required"
            },
        },
        submitHandler: function(form) {
            $(form).ajaxSubmit({
                type:"POST",
                data: $(form).serialize(),
                url:"../wp-content/themes/knw/mail.php",
                error: function() {
                    $('.form').fadeTo( "slow", 0.15, function() {
                        $('.form__error').fadeIn();
                    });
                },
                success: function() {
                    $('.form').fadeTo( "slow", 0.15, function() {
                        $('.form__success').fadeIn();
                    });
                }
            });
        }
    });
});
